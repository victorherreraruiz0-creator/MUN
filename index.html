<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNESCO Training & Rules - MUN Trivia</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="screen">
            <div class="header">
                <h1>üèõÔ∏è UNESCO</h1>
                <p>Training & Rules Trivia</p>
                <div class="mun-badge">Model of United Nations</div>
            </div>

            <div class="welcome-content">
                <h2>Welcome to the Trivia!</h2>
                <p style="color: #666; margin-bottom: 30px; font-size: 1.1em;">
                    Enter the names of the two competing teams
                </p>

                <div class="error-message" id="errorMessage"></div>

                <div class="teams-input-container">
                    <div class="team-input-group">
                        <label for="team1">Team 1 üá∫üá≥</label>
                        <input type="text" id="team1" placeholder="Team 1 name" maxlength="20">
                    </div>
                    <div class="team-input-group">
                        <label for="team2">Team 2 üá∫üá≥</label>
                        <input type="text" id="team2" placeholder="Team 2 name" maxlength="20">
                    </div>
                </div>

                <button class="start-button" onclick="startTrivia()">Start Trivia</button>
            </div>
        </div>

        <!-- Trivia Screen -->
        <div id="triviaScreen" class="screen">
            <div class="header">
                <h1>UNESCO Training & Rules</h1>
                <div class="mun-badge">Model of United Nations</div>
            </div>

            <div class="turn-indicator" id="turnIndicator"></div>

            <div class="score-board" id="scoreBoard"></div>

            <div class="progress-info" id="progressInfo"></div>

            <div class="question-container" id="questionContainer"></div>

            <div class="buttons-container">
                <button class="btn btn-submit" id="submitBtn" onclick="handleAnswerFlow()" disabled>
                    Submit Answer
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="header">
                <h1>üèÜ Final Results</h1>
                <div class="mun-badge">UNESCO Training & Rules</div>
            </div>

            <h2 class="results-title">End of Trivia</h2>

            <div class="final-scores" id="finalScores"></div>

            <button class="restart-button" onclick="restartTrivia()">New Trivia</button>
        </div>


    </div>

    <script>
        // Trivia questions data
        const questions = [
            {
                block: "Block 1: Course Requirements",
                question: "How many participations minimum must you have in each class to get credit for the day?",
                options: [
                    { text: "At least 5 participations", correct: false },
                    { text: "At least 3 participations", correct: true },
                    { text: "Only 1 participation", correct: false }
                ]
            },
            {
                block: "Block 2: MUN Basics",
                question: "What is the Model United Nations (MUN)?",
                options: [
                    { text: "It's a sports competition between universities", correct: false },
                    { text: "It's an educational simulation where students represent different countries to debate global issues and draft resolutions", correct: true },
                    { text: "It's a cultural festival celebrating different nations", correct: false }
                ]
            },
            {
                block: "Block 2: MUN Basics",
                question: "What do the letters UNESCO stand for in English?",
                options: [
                    { text: "Universal Network for Educational and Scientific Cooperation", correct: false },
                    { text: "United Nations Economic and Social Council Organization", correct: false },
                    { text: "United Nations Educational, Scientific and Cultural Organization", correct: true }
                ]
            },
            {
                block: "Block 2: MUN Basics",
                question: "What is the main objective of UNESCO?",
                options: [
                    { text: "To regulate international trade", correct: false },
                    { text: "To build global peace through international cooperation", correct: true },
                    { text: "To control world currencies", correct: false }
                ]
            },
            {
                block: "Block 3: UNESCO Focus",
                question: "In which specific areas does UNESCO focus its work?",
                options: [
                    { text: "Military defense, space exploration, and sports development", correct: false },
                    { text: "Banking regulation, stock markets, and cryptocurrency", correct: false },
                    { text: "Quality education, protection of world heritage sites, scientific research for sustainability, and defense of freedom of expression", correct: true }
                ]
            },
            {
                block: "Block 3: UNESCO Focus",
                question: "What is the central topic that the UNESCO committee will discuss on this occasion?",
                options: [
                    { text: "The establishment of policies and programs for the protection and safeguarding of the cultural heritage of indigenous communities", correct: true },
                    { text: "The creation of a universal digital currency", correct: false },
                    { text: "The regulation of social media platforms", correct: false }
                ]
            },
            {
                block: "Block 4: Committee Authorities",
                question: "Who are the authorities in charge of maintaining order throughout the MUN debate?",
                options: [
                    { text: "The Security Guards and Police Officers", correct: false },
                    { text: "The Chairs or Board, specifically the President and the Moderator", correct: true },
                    { text: "The School Principal and Vice Principal", correct: false }
                ]
            },
            {
                block: "Block 4: Committee Authorities",
                question: "What is the name of the concise document that summarizes a country's position on a specific topic?",
                options: [
                    { text: "Country Report", correct: false },
                    { text: "Diplomatic Memo", correct: false },
                    { text: "Position Paper", correct: true }
                ]
            }
        ];

        // Global variables
        let currentQuestion = 0;
        let team1Name = "";
        let team2Name = "";
        let team1Score = 0;
        let team2Score = 0;
        let currentTeam = 1;
        let selectedAnswer = null;
        let answerSubmitted = false;
        let lastAnswerCorrect = false;


        function startTrivia() {
            const team1Input = document.getElementById("team1");
            const team2Input = document.getElementById("team2");
            const errorMessage = document.getElementById("errorMessage");

            if (team1Input.value.trim() === "" || team2Input.value.trim() === "") {
                errorMessage.textContent = "Please enter the name of both teams";
                errorMessage.style.display = "block";
                return;
            }

            team1Name = team1Input.value.trim();
            team2Name = team2Input.value.trim();

            document.getElementById("welcomeScreen").style.display = "none";
            document.getElementById("triviaScreen").style.display = "block";

            currentQuestion = 0;
            team1Score = 0;
            team2Score = 0;
            currentTeam = 1;
            answerSubmitted = false;

            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }

            const question = questions[currentQuestion];
            selectedAnswer = null;
            answerSubmitted = false;

            // Update scoreboard and turn indicator
            updateScoreBoard();

            // Show turn indicator
            const turnIndicator = document.getElementById("turnIndicator");
            turnIndicator.textContent = `üéØ ${currentTeam === 1 ? team1Name : team2Name}'s Turn to Answer`;
            turnIndicator.style.background = currentTeam === 1 ? 
                'linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%)' : 
                'linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)';

            // Show progress
            const progressInfo = document.getElementById("progressInfo");
            progressInfo.textContent = `${question.block} | Question ${currentQuestion + 1} of ${questions.length}`;

            // Render question and options
            const questionContainer = document.getElementById("questionContainer");
            let html = `
                <div class="question-header">${question.block}</div>
                <div class="question-text">Question ${currentQuestion + 1}: ${question.question}</div>
                <div class="options-container">
            `;

            question.options.forEach((option, index) => {
                html += `
                    <label class="option" onclick="selectOption(${index})">
                        <input type="radio" name="answer" value="${index}">
                        ${option.text}
                    </label>
                `;
            });

            html += `</div>`;
            questionContainer.innerHTML = html;

            document.getElementById("submitBtn").disabled = true;
        }

        function selectOption(index) {
            if (answerSubmitted) return;
            
            selectedAnswer = index;
            
            // Update UI
            const options = document.querySelectorAll(".option");
            options.forEach((opt, i) => {
                opt.classList.remove("selected");
                if (i === index) {
                    opt.classList.add("selected");
                    opt.querySelector("input").checked = true;
                }
            });

            document.getElementById("submitBtn").disabled = false;
        }

        function submitAnswer() {
            if (selectedAnswer === null || answerSubmitted) return;

            const question = questions[currentQuestion];
            const isCorrect = question.options[selectedAnswer].correct;
            lastAnswerCorrect = isCorrect;
            answerSubmitted = true;

            // Show correct/incorrect animations
            const options = document.querySelectorAll(".option");
            options.forEach((opt, i) => {
                opt.classList.add("disabled");
                if (i === selectedAnswer) {
                    if (isCorrect) {
                        opt.classList.add("correct");
                    } else {
                        opt.classList.add("incorrect");
                    }
                }
                // Show the correct answer if user was wrong
                if (!isCorrect && question.options[i].correct) {
                    opt.classList.add("correct");
                }
            });

            // Update score if correct
            if (isCorrect) {
                if (currentTeam === 1) {
                    team1Score++;
                } else {
                    team2Score++;
                }
            }

            // Update button
            const submitBtn = document.getElementById("submitBtn");
            submitBtn.textContent = "Next Question";
            submitBtn.disabled = false;

            // Update scoreboard
            updateScoreBoard();

            // Auto-advance if incorrect after 2 seconds
            if (!isCorrect) {
                setTimeout(() => {
                    handleAnswerFlow();
                }, 2000);
            }
        }

        function handleAnswerFlow() {
            if (!answerSubmitted) {
                submitAnswer();
            } else {
                // Always advance to next question and switch team
                currentTeam = currentTeam === 1 ? 2 : 1;
                currentQuestion++;

                loadQuestion();
            }
        }

        function updateScoreBoard() {
            const scoreBoard = document.getElementById("scoreBoard");
            scoreBoard.innerHTML = `
                <div class="team-score ${currentTeam === 1 ? 'active' : ''}">
                    <h3>üá∫üá≥ ${team1Name}</h3>
                    <div class="score-value">${team1Score}</div>
                </div>
                <div class="team-score ${currentTeam === 2 ? 'active' : ''}">
                    <h3>üá∫üá≥ ${team2Name}</h3>
                    <div class="score-value">${team2Score}</div>
                </div>
            `;
        }

        function showResults() {
            document.getElementById("triviaScreen").style.display = "none";
            document.getElementById("resultsScreen").style.display = "block";

            const winner = team1Score > team2Score ? 1 : (team2Score > team1Score ? 2 : 0);

            let finalScoresHtml = `
                <div class="final-score-card ${winner === 1 ? 'winner' : ''}">
                    <h3>üá∫üá≥ ${team1Name}</h3>
                    <div class="final-score-value">${team1Score}</div>
                    ${winner === 1 ? '<div class="winner-badge">üèÜ WINNER!</div>' : ''}
                </div>
                <div class="final-score-card ${winner === 2 ? 'winner' : ''}">
                    <h3>üá∫üá≥ ${team2Name}</h3>
                    <div class="final-score-value">${team2Score}</div>
                    ${winner === 2 ? '<div class="winner-badge">üèÜ WINNER!</div>' : ''}
                </div>
            `;

            if (winner === 0) {
                finalScoresHtml += `<div style="grid-column: 1/-1; margin-top: 20px; font-size: 1.3em; color: #ff6b35;">
                    TIE! Both teams performed excellently üéâ
                </div>`;
            }

            document.getElementById("finalScores").innerHTML = finalScoresHtml;
        }



        function restartTrivia() {
            document.getElementById("resultsScreen").style.display = "none";
            document.getElementById("welcomeScreen").style.display = "flex";
            document.getElementById("team1").value = "";
            document.getElementById("team2").value = "";
            document.getElementById("errorMessage").style.display = "none";
            
            // Reset variables
            currentQuestion = 0;
            team1Score = 0;
            team2Score = 0;
            currentTeam = 1;
            selectedAnswer = null;
            answerSubmitted = false;
            lastAnswerCorrect = false;
            tiebreakTeam = null;
        }
    </script>
</body>
</html>
