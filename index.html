<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNESCO Training & Rules - MUN Trivia</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="screen">
            <div class="header">
                <h1>üèõÔ∏è UNESCO</h1>
                <p>Training & Rules Trivia</p>
                <div class="mun-badge">Model of United Nations</div>
            </div>

            <div class="welcome-content">
                <h2>Welcome to the Trivia!</h2>
                <p style="color: #666; margin-bottom: 30px; font-size: 1.1em;">
                    Enter the names of the two competing teams
                </p>

                <div class="error-message" id="errorMessage"></div>

                <div class="teams-input-container">
                    <div class="team-input-group">
                        <label for="team1">Team 1 üá∫üá≥</label>
                        <input type="text" id="team1" placeholder="Team 1 name" maxlength="20">
                    </div>
                    <div class="team-input-group">
                        <label for="team2">Team 2 üá∫üá≥</label>
                        <input type="text" id="team2" placeholder="Team 2 name" maxlength="20">
                    </div>
                </div>

                <button class="start-button" onclick="startTrivia()">Start Trivia</button>
            </div>
        </div>

        <!-- Trivia Screen -->
        <div id="triviaScreen" class="screen">
            <div class="header">
                <h1>UNESCO Training & Rules</h1>
                <div class="mun-badge">Model of United Nations</div>
            </div>

            <div class="turn-indicator" id="turnIndicator"></div>

            <div class="score-board" id="scoreBoard"></div>

            <div class="progress-info" id="progressInfo"></div>

            <div class="question-container" id="questionContainer"></div>

            <div class="buttons-container">
                <button class="btn btn-submit" id="submitBtn" onclick="handleAnswerFlow()" disabled>
                    Submit Answer
                </button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="screen">
            <div class="header">
                <h1>üèÜ Final Results</h1>
                <div class="mun-badge">UNESCO Training & Rules</div>
            </div>

            <h2 class="results-title">End of Trivia</h2>

            <div class="final-scores" id="finalScores"></div>

            <button class="restart-button" onclick="restartTrivia()">New Trivia</button>
        </div>

        <!-- Tiebreaker Screen -->
        <div id="tiebreakScreen" class="screen">
            <div class="header">
                <h1>‚öñÔ∏è Tiebreaker Question</h1>
                <div class="mun-badge">Sudden Death</div>
            </div>

            <h2 class="results-title">The scores are tied!</h2>

            <div class="tiebreak-selection" id="tiebreakSelection"></div>

            <div class="tiebreak-question" id="tiebreakQuestion" style="display: none;">
                <div class="question-container">
                    <div class="question-header">Final Question</div>
                    <div class="question-text" id="tiebreakQuestionText"></div>
                    <div class="options-container" id="tiebreakOptions"></div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-submit" id="tiebreakSubmitBtn" onclick="submitTiebreakAnswer()" disabled>
                        Submit Answer
                    </button>
                </div>
            </div>

            <div class="final-scores" id="tiebreakFinalScores"></div>

            <button class="restart-button" id="restartBtnTiebreak" onclick="restartTrivia()" style="display: none;">New Trivia</button>
        </div>
    </div>

    <script>
        // Trivia questions data
        const questions = [
            {
                block: "Block 1: Rules and Procedures",
                question: "The Exit Rule: What happens if a delegate wants to leave the room while a Position Paper is being read or during a voting process?",
                options: [
                    { text: "They can leave if they ask the Moderator out loud", correct: false },
                    { text: "Entry and exit are strictly forbidden during these moments", correct: true },
                    { text: "They must leave their placard at the door as a deposit", correct: false }
                ]
            },
            {
                block: "Block 1: Rules and Procedures",
                question: "The First Warning: According to the rules, what is the immediate consequence of receiving your first warning?",
                options: [
                    { text: "You are expelled from the committee for 10 minutes", correct: false },
                    { text: "You lose the right to be elected for the Best Delegate award", correct: true },
                    { text: "Your final grade is automatically set to 0.0", correct: false }
                ]
            },
            {
                block: "Block 1: Rules and Procedures",
                question: "Taking the Floor: What is the correct way to ask for the floor (the right to speak) or to cast a vote?",
                options: [
                    { text: "Raising your hand as high as possible", correct: false },
                    { text: "Standing up and saying Point of Order", correct: false },
                    { text: "Raising your placard so the Moderator can see it", correct: true }
                ]
            },
            {
                block: "Block 1: Rules and Procedures",
                question: "Attendance Roll Call: When the President calls your delegation's name during the roll call, how must you respond?",
                options: [
                    { text: "I am here or Ready", correct: false },
                    { text: "Present or Present and voting", correct: true },
                    { text: "Yes, President or Acknowledged", correct: false }
                ]
            },
            {
                block: "Block 1: Rules and Procedures",
                question: "Speaking Time: Once a delegate is at the podium to read their official position, how much time do they have?",
                options: [
                    { text: "1 minute", correct: false },
                    { text: "2 minutes", correct: true },
                    { text: "As much time as they need to finish", correct: false }
                ]
            },
            {
                block: "Block 2: Diplomatic Protocol",
                question: "Diplomatic Communication: If you need to communicate with another delegate or the Chair during the session, how should you do it?",
                options: [
                    { text: "By sending a diplomatic note through a staff member", correct: true },
                    { text: "By taking a picture of him to scan it with Google Lens to find matches, then searching for him on Facebook, and finally getting his number to call and ask him.", correct: false },
                    { text: "By raising a point of personal privilege every time", correct: false }
                ]
            },
            {
                block: "Block 2: Diplomatic Protocol",
                question: "Leftover Time: If a delegate finishes their speech before the 2 minutes are up, what can they do with the remaining time?",
                options: [
                    { text: "They must stay at the podium in silence until time expires", correct: false },
                    { text: "They can yield it to the Chair, to questions, or to another delegate", correct: true },
                    { text: "The time is lost and cannot be used by anyone else", correct: false }
                ]
            },
            {
                block: "Block 2: Diplomatic Protocol",
                question: "MOTIONS: How many motions are there?",
                options: [
                    { text: "1", correct: false },
                    { text: "67", correct: true },
                    { text: "5", correct: false }
                ]
            },
            {
                block: "Block 3: United Nations History",
                question: "The Foundation: In which year was the United Nations (UN) officially founded after World War II?",
                options: [
                    { text: "1918", correct: false },
                    { text: "1945", correct: true },
                    { text: "1960", correct: false }
                ]
            },
            {
                block: "Block 3: United Nations History",
                question: "The Secretary-General: Who is the current Secretary-General of the United Nations?",
                options: [
                    { text: "Ban Ki-moon", correct: false },
                    { text: "Ant√≥nio Guterres", correct: true },
                    { text: "Mateo yo guapo", correct: false }
                ]
            },
            {
                block: "Block 3: United Nations History",
                question: "UN Headquarters: In which city is the main headquarters of the United Nations located?",
                options: [
                    { text: "Geneva", correct: false },
                    { text: "Paris", correct: false },
                    { text: "New York City", correct: true }
                ]
            },
            {
                block: "Block 3: United Nations History",
                question: "UNESCO's Purpose: Since this is the UNESCO committee, what does the letter E in UNESCO stand for?",
                options: [
                    { text: "Economic", correct: false },
                    { text: "Educational", correct: true },
                    { text: "Environmental", correct: false }
                ]
            },
            {
                block: "Block 3: United Nations History",
                question: "UNESCO is currently working on the First Global Agreement about a new technology. Which one is it?",
                options: [
                    { text: "GTA VI for free", correct: false },
                    { text: "Ethics of Artificial Intelligence (AI)", correct: true },
                    { text: "Tik Tok Algorithms", correct: false }
                ]
            },
            {
                block: "Block 3: United Nations History",
                question: "The Main Mission: What is the primary mission of the United Nations according to its Charter?",
                options: [
                    { text: "To rule all countries with a single government", correct: false },
                    { text: "To maintain international peace and security", correct: true },
                    { text: "To create a single world currency", correct: false }
                ]
            }
        ];

        // Global variables
        let currentQuestion = 0;
        let team1Name = "";
        let team2Name = "";
        let team1Score = 0;
        let team2Score = 0;
        let currentTeam = 1;
        let selectedAnswer = null;
        let answerSubmitted = false;
        let lastAnswerCorrect = false;
        let tiebreakTeam = null;

        const tiebreakQuestion = {
            question: "What is the percentage value for the Position Paper B?",
            options: [
                { text: "15%", correct: false },
                { text: "20%", correct: false },
                { text: "0%", correct: true }
            ]
        };

        function startTrivia() {
            const team1Input = document.getElementById("team1");
            const team2Input = document.getElementById("team2");
            const errorMessage = document.getElementById("errorMessage");

            if (team1Input.value.trim() === "" || team2Input.value.trim() === "") {
                errorMessage.textContent = "Please enter the name of both teams";
                errorMessage.style.display = "block";
                return;
            }

            team1Name = team1Input.value.trim();
            team2Name = team2Input.value.trim();

            document.getElementById("welcomeScreen").style.display = "none";
            document.getElementById("triviaScreen").style.display = "block";

            currentQuestion = 0;
            team1Score = 0;
            team2Score = 0;
            currentTeam = 1;
            answerSubmitted = false;

            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                showResults();
                return;
            }

            const question = questions[currentQuestion];
            selectedAnswer = null;
            answerSubmitted = false;

            // Update scoreboard and turn indicator
            updateScoreBoard();

            // Show turn indicator
            const turnIndicator = document.getElementById("turnIndicator");
            turnIndicator.textContent = `üéØ ${currentTeam === 1 ? team1Name : team2Name}'s Turn to Answer`;
            turnIndicator.style.background = currentTeam === 1 ? 
                'linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%)' : 
                'linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%)';

            // Show progress
            const progressInfo = document.getElementById("progressInfo");
            progressInfo.textContent = `${question.block} | Question ${currentQuestion + 1} of ${questions.length}`;

            // Render question and options
            const questionContainer = document.getElementById("questionContainer");
            let html = `
                <div class="question-header">${question.block}</div>
                <div class="question-text">Question ${currentQuestion + 1}: ${question.question}</div>
                <div class="options-container">
            `;

            question.options.forEach((option, index) => {
                html += `
                    <label class="option" onclick="selectOption(${index})">
                        <input type="radio" name="answer" value="${index}">
                        ${option.text}
                    </label>
                `;
            });

            html += `</div>`;
            questionContainer.innerHTML = html;

            document.getElementById("submitBtn").disabled = true;
        }

        function selectOption(index) {
            if (answerSubmitted) return;
            
            selectedAnswer = index;
            
            // Update UI
            const options = document.querySelectorAll(".option");
            options.forEach((opt, i) => {
                opt.classList.remove("selected");
                if (i === index) {
                    opt.classList.add("selected");
                    opt.querySelector("input").checked = true;
                }
            });

            document.getElementById("submitBtn").disabled = false;
        }

        function submitAnswer() {
            if (selectedAnswer === null || answerSubmitted) return;

            const question = questions[currentQuestion];
            const isCorrect = question.options[selectedAnswer].correct;
            lastAnswerCorrect = isCorrect;
            answerSubmitted = true;

            // Show correct/incorrect animations
            const options = document.querySelectorAll(".option");
            options.forEach((opt, i) => {
                opt.classList.add("disabled");
                if (i === selectedAnswer) {
                    if (isCorrect) {
                        opt.classList.add("correct");
                    } else {
                        opt.classList.add("incorrect");
                    }
                }
                // Show the correct answer if user was wrong
                if (!isCorrect && question.options[i].correct) {
                    opt.classList.add("correct");
                }
            });

            // Update score if correct
            if (isCorrect) {
                if (currentTeam === 1) {
                    team1Score++;
                } else {
                    team2Score++;
                }
            }

            // Update button
            const submitBtn = document.getElementById("submitBtn");
            submitBtn.textContent = "Next Question";
            submitBtn.disabled = false;

            // Update scoreboard
            updateScoreBoard();

            // Auto-advance if incorrect after 2 seconds
            if (!isCorrect) {
                setTimeout(() => {
                    handleAnswerFlow();
                }, 2000);
            }
        }

        function handleAnswerFlow() {
            if (!answerSubmitted) {
                submitAnswer();
            } else {
                // Always advance to next question and switch team
                currentTeam = currentTeam === 1 ? 2 : 1;
                currentQuestion++;

                loadQuestion();
            }
        }

        function updateScoreBoard() {
            const scoreBoard = document.getElementById("scoreBoard");
            scoreBoard.innerHTML = `
                <div class="team-score ${currentTeam === 1 ? 'active' : ''}">
                    <h3>üá∫üá≥ ${team1Name}</h3>
                    <div class="score-value">${team1Score}</div>
                </div>
                <div class="team-score ${currentTeam === 2 ? 'active' : ''}">
                    <h3>üá∫üá≥ ${team2Name}</h3>
                    <div class="score-value">${team2Score}</div>
                </div>
            `;
        }

        function showResults() {
            document.getElementById("triviaScreen").style.display = "none";

            const winner = team1Score > team2Score ? 1 : (team2Score > team1Score ? 2 : 0);

            // If tie, show tiebreaker
            if (winner === 0) {
                showTiebreaker();
                return;
            }

            // Show normal results
            document.getElementById("resultsScreen").style.display = "block";

            let finalScoresHtml = `
                <div class="final-score-card ${winner === 1 ? 'winner' : ''}">
                    <h3>üá∫üá≥ ${team1Name}</h3>
                    <div class="final-score-value">${team1Score}</div>
                    ${winner === 1 ? '<div class="winner-badge">üèÜ WINNER!</div>' : ''}
                </div>
                <div class="final-score-card ${winner === 2 ? 'winner' : ''}">
                    <h3>üá∫üá≥ ${team2Name}</h3>
                    <div class="final-score-value">${team2Score}</div>
                    ${winner === 2 ? '<div class="winner-badge">üèÜ WINNER!</div>' : ''}
                </div>
            `;

            document.getElementById("finalScores").innerHTML = finalScoresHtml;
        }

        function showTiebreaker() {
            document.getElementById("tiebreakScreen").style.display = "block";

            const selectionHtml = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <p style="font-size: 1.1em; color: #666; margin-bottom: 20px;">Choose which team answers the tiebreaker question:</p>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button class="btn btn-submit" onclick="startTiebreaker(1)" style="flex: 1; max-width: 200px;">
                            üá∫üá≥ ${team1Name}
                        </button>
                        <button class="btn btn-submit" onclick="startTiebreaker(2)" style="flex: 1; max-width: 200px;">
                            üá∫üá≥ ${team2Name}
                        </button>
                    </div>
                </div>
            `;

            document.getElementById("tiebreakSelection").innerHTML = selectionHtml;
        }

        function startTiebreaker(team) {
            tiebreakTeam = team;
            selectedAnswer = null;
            answerSubmitted = false;

            document.getElementById("tiebreakSelection").style.display = "none";
            document.getElementById("tiebreakQuestion").style.display = "block";

            // Render tiebreaker question
            document.getElementById("tiebreakQuestionText").textContent = tiebreakQuestion.question;

            let optionsHtml = "";
            tiebreakQuestion.options.forEach((option, index) => {
                optionsHtml += `
                    <label class="option" onclick="selectTiebreakOption(${index})">
                        <input type="radio" name="tiebreak-answer" value="${index}">
                        ${option.text}
                    </label>
                `;
            });

            document.getElementById("tiebreakOptions").innerHTML = optionsHtml;
            document.getElementById("tiebreakSubmitBtn").disabled = true;
        }

        function selectTiebreakOption(index) {
            selectedAnswer = index;

            const options = document.querySelectorAll("#tiebreakOptions .option");
            options.forEach((opt, i) => {
                opt.classList.remove("selected");
                if (i === index) {
                    opt.classList.add("selected");
                    opt.querySelector("input").checked = true;
                }
            });

            document.getElementById("tiebreakSubmitBtn").disabled = false;
        }

        function submitTiebreakAnswer() {
            if (selectedAnswer === null) return;

            const isCorrect = tiebreakQuestion.options[selectedAnswer].correct;
            answerSubmitted = true;

            // Show correct/incorrect animations
            const options = document.querySelectorAll("#tiebreakOptions .option");
            options.forEach((opt, i) => {
                opt.classList.add("disabled");
                if (i === selectedAnswer) {
                    if (isCorrect) {
                        opt.classList.add("correct");
                    } else {
                        opt.classList.add("incorrect");
                    }
                }
                if (!isCorrect && tiebreakQuestion.options[i].correct) {
                    opt.classList.add("correct");
                }
            });

            // Update score if correct
            if (isCorrect) {
                if (tiebreakTeam === 1) {
                    team1Score++;
                } else {
                    team2Score++;
                }
            }

            // Show results after 2 seconds
            setTimeout(() => {
                showTiebreakResults();
            }, 2000);
        }

        function showTiebreakResults() {
            document.getElementById("tiebreakQuestion").style.display = "none";

            const winner = team1Score > team2Score ? 1 : 2;

            let finalScoresHtml = `
                <div class="final-score-card ${winner === 1 ? 'winner' : ''}">
                    <h3>üá∫üá≥ ${team1Name}</h3>
                    <div class="final-score-value">${team1Score}</div>
                    ${winner === 1 ? '<div class="winner-badge">üèÜ WINNER!</div>' : ''}
                </div>
                <div class="final-score-card ${winner === 2 ? 'winner' : ''}">
                    <h3>üá∫üá≥ ${team2Name}</h3>
                    <div class="final-score-value">${team2Score}</div>
                    ${winner === 2 ? '<div class="winner-badge">üèÜ WINNER!</div>' : ''}
                </div>
            `;

            document.getElementById("tiebreakFinalScores").innerHTML = finalScoresHtml;
            document.getElementById("restartBtnTiebreak").style.display = "block";
        }

        function restartTrivia() {
            document.getElementById("resultsScreen").style.display = "none";
            document.getElementById("tiebreakScreen").style.display = "none";
            document.getElementById("welcomeScreen").style.display = "flex";
            document.getElementById("team1").value = "";
            document.getElementById("team2").value = "";
            document.getElementById("errorMessage").style.display = "none";
            
            // Reset variables
            currentQuestion = 0;
            team1Score = 0;
            team2Score = 0;
            currentTeam = 1;
            selectedAnswer = null;
            answerSubmitted = false;
            lastAnswerCorrect = false;
            tiebreakTeam = null;
        }
    </script>
</body>
</html>
